
# MDR Downloader Docker Image

This Docker setup builds and runs the **MDR Downloader** application written in .NET 8.0, allowing you to pass 
command-line arguments for dynamic behavior. Additionally, logs are managed and stored using Docker volumes, mounted 
to `$HOME/MDR_Logs_Docker_Volume` and `$HOME/MDR_Test` on the host.

## Requirements

- Docker
- Git (if cloning this repository)

## Getting Started

### Clone the MDR Downloader Repository

If you haven't already cloned the MDR Downloader repository, do so:

```bash
git clone https://github.com/michelescarlato/MDR_Downloader.git
```

Make sure you have the `Dockerfile` and `appsettings.json` in the same directory.

### Building the Docker Image

To build the Docker image for **MDR Downloader**:

```bash
docker build -t mdr-downloader-dotnet8 .
```

This will create a Docker image named `mdr-downloader-dotnet8` using .NET 8.0.

## Running the Container with Command-Line Parameters and Volumes

You can run the MDR Downloader with custom parameters by passing them at runtime and mounting two volumes: one for logs and one for test data.

Here is the default command:

```bash
docker run -it --name mdr-downloader-container \
  -v $HOME/MDR_Logs_Docker_Volume:/app/MDR_Logs \
  -v $HOME/MDR_Test:/app/test \
  mdr-downloader-dotnet8 -s 100120 -t 111 -d 2020-09-23
```

### Explanation:

- **Command-line Parameters**: You can change the values for `-s`, `-t`, and `-d` as needed when you run the container.
- **Volumes**:
    - `$HOME/MDR_Logs_Docker_Volume:/app/MDR_Logs`: This volume stores log files generated by the application.
    - `$HOME/MDR_Test:/app/test`: This volume is used for test-related data and resources.

### Managing the Docker Volumes

To store logs and test data, we use two Docker volumes mounted to the appropriate directories in the container.

### Create the Docker Volumes

First, ensure you have the necessary directories on your local machine:

```bash
mkdir -p $HOME/MDR_Logs_Docker_Volume
mkdir -p $HOME/MDR_Test
```

### Mount the Volumes

When running the container, mount the volumes like this:

```bash
docker run -it --name mdr-downloader-container \
  -v $HOME/MDR_Logs_Docker_Volume:/app/MDR_Logs \
  -v $HOME/MDR_Test:/app/test \
  mdr-downloader-dotnet8 -s 100120 -t 111 -d 2020-09-23
```

This maps both Docker volumes to their respective directories in the container:
- Logs are stored in `$HOME/MDR_Logs_Docker_Volume`.
- Test data is stored in `$HOME/MDR_Test`.

### Inspecting the Logs and Test Data

To inspect the logs or test data, navigate to the respective directories on the host:

#### Logs:
```bash
cd $HOME/MDR_Logs_Docker_Volume
ls -la
```

#### Test Data:
```bash
cd $HOME/MDR_Test
ls -la
```

## Cleaning Up

If you need to remove the container after it has stopped, run:

```bash
docker rm mdr-downloader-container
```

## Troubleshooting

- **Container Name Conflict**: If you receive an error that the container name is already in use, remove the existing container or use a different name.
- **Logs or Test Data Not Accessible**: Ensure that the volumes are mounted correctly and that you have permission to access the directories.

## License

This project follows the license of the [MDR Downloader](https://github.com/michelescarlato/MDR_Downloader.git).
